{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/M.jpg","path":"images/M.jpg","modified":0,"renderable":0},{"_id":"source/images/logo.jpg","path":"images/logo.jpg","modified":0,"renderable":0},{"_id":"source/images/mobike-wechat-app-2.png","path":"images/mobike-wechat-app-2.png","modified":0,"renderable":0},{"_id":"source/images/mobike-wechat-app-6.png","path":"images/mobike-wechat-app-6.png","modified":0,"renderable":0},{"_id":"source/images/mobike-wechat-app-5.png","path":"images/mobike-wechat-app-5.png","modified":0,"renderable":0},{"_id":"source/images/mobike-wechat-app-3-1.png","path":"images/mobike-wechat-app-3-1.png","modified":0,"renderable":0},{"_id":"source/images/mobike-d-768x512.jpg","path":"images/mobike-d-768x512.jpg","modified":0,"renderable":0},{"_id":"source/images/mobike-wechat-app-4.png","path":"images/mobike-wechat-app-4.png","modified":0,"renderable":0},{"_id":"source/images/mobike-d-768x512-wechat.jpg","path":"images/mobike-d-768x512-wechat.jpg","modified":0,"renderable":0},{"_id":"themes/Daily/source/css/style.css","path":"css/style.css","modified":0,"renderable":1},{"_id":"themes/Daily/source/images/arrow-left.svg","path":"images/arrow-left.svg","modified":0,"renderable":1},{"_id":"themes/Daily/source/images/arrow-right.svg","path":"images/arrow-right.svg","modified":0,"renderable":1},{"_id":"themes/Daily/source/images/github.svg","path":"images/github.svg","modified":0,"renderable":1},{"_id":"themes/Daily/source/images/mail.svg","path":"images/mail.svg","modified":0,"renderable":1},{"_id":"themes/Daily/source/images/menu.svg","path":"images/menu.svg","modified":0,"renderable":1},{"_id":"themes/Daily/source/images/twitter.svg","path":"images/twitter.svg","modified":0,"renderable":1},{"_id":"themes/Daily/source/images/weibo.svg","path":"images/weibo.svg","modified":0,"renderable":1},{"_id":"themes/Daily/source/js/app.js","path":"js/app.js","modified":0,"renderable":1},{"_id":"source/images/201611.jpg","path":"images/201611.jpg","modified":0,"renderable":0},{"_id":"source/images/IMG_6492.jpg","path":"images/IMG_6492.jpg","modified":0,"renderable":0},{"_id":"source/images/mobike-wechat-app-1.png","path":"images/mobike-wechat-app-1.png","modified":0,"renderable":0},{"_id":"source/images/mobike-wechat-app-3.png","path":"images/mobike-wechat-app-3.png","modified":0,"renderable":0},{"_id":"source/images/IMG_6863.png","path":"images/IMG_6863.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"12bad9e1d4f5d6f677e630d87964519fdd139bb9","modified":1483713685000},{"_id":"themes/Daily/.DS_Store","hash":"a145c190297fd50b84a9424c5d70897e0527fe6b","modified":1483709009000},{"_id":"themes/Daily/README.md","hash":"d20fbbb4e03adcd95aec0bde06a281f0e2831eca","modified":1483700737000},{"_id":"themes/Daily/_config.yml","hash":"e26d3f73c1519a6746bbc3100365e759016fbbcc","modified":1483867597000},{"_id":"source/_posts/摩拜单车微信小程序快速开发实践.md","hash":"570b03acb2d649610247b7955e4437feae366bca","modified":1483867834000},{"_id":"source/images/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1483786020000},{"_id":"source/images/M.jpg","hash":"f80ac5caacc21a58de779f5aa69fd8facf299ba5","modified":1483715330000},{"_id":"source/images/logo.jpg","hash":"484ef32d0b643080a3b6ae1240a97cba7d4c0c1c","modified":1479446168000},{"_id":"source/images/mobike-wechat-app-2.png","hash":"61f72efb9996a404c321d300e3ae4574fec97aa8","modified":1483783678000},{"_id":"source/images/mobike-wechat-app-6.png","hash":"7a885b9c9bd5e2063d84539b3d7155d55028de6e","modified":1483787626000},{"_id":"source/images/mobike-wechat-app-5.png","hash":"0909cf9498012e4f4fefdb0551fbe53da7194537","modified":1483786711000},{"_id":"themes/Daily/languages/default.yml","hash":"2df42359e6646c0c2903ada8411100a8f1d15134","modified":1483700737000},{"_id":"themes/Daily/languages/zh-CN.yml","hash":"3e28e97eaf0e172ddee96b2d6f8ba604d90ff24d","modified":1483700737000},{"_id":"themes/Daily/languages/en.yml","hash":"2df42359e6646c0c2903ada8411100a8f1d15134","modified":1483700737000},{"_id":"themes/Daily/languages/zh-TW.yml","hash":"c727b3550a12ad6f99b13e1b320466f8238f4b54","modified":1483700737000},{"_id":"themes/Daily/layout/archive.ejs","hash":"5afa6387ae87e15a4562822850806c51f471cbe8","modified":1483700737000},{"_id":"themes/Daily/layout/index.ejs","hash":"3317310e01719dd58878fb4b7bd1b41d495800af","modified":1483700737000},{"_id":"themes/Daily/layout/layout.ejs","hash":"c673e9ca69477f985a421682722fc91c5c72c986","modified":1483700737000},{"_id":"themes/Daily/layout/post.ejs","hash":"03ce69cbb9002a3254ba87264bd81eea63c0ef1e","modified":1483867826000},{"_id":"themes/Daily/layout/tag.ejs","hash":"f13f991cdd2d462cfaff2ead0a110504e10d1d2f","modified":1483700737000},{"_id":"source/images/mobike-wechat-app-3-1.png","hash":"1efb51f7512b799c0cea9590972e9ec22b579150","modified":1483785014000},{"_id":"source/images/mobike-d-768x512.jpg","hash":"b74643b6b760dd107291291c27bd58328d210ec6","modified":1478835805000},{"_id":"source/images/mobike-wechat-app-4.png","hash":"ce0b5a3b2a72215eb9ba5136140e9e91a6b55f04","modified":1483786003000},{"_id":"source/images/mobike-d-768x512-wechat.jpg","hash":"d0e8f739eeff91446aab4b88b94edbad4ff7ec23","modified":1483790286000},{"_id":"themes/Daily/layout/_partial/article-archive.ejs","hash":"32e6d38ac9074922f958126da4eb5cde0ae98da4","modified":1483700737000},{"_id":"themes/Daily/layout/_partial/article-index.ejs","hash":"7bb06fc76a08175c25bf598060bbc1e1f1ca9ad1","modified":1483717428000},{"_id":"themes/Daily/layout/_partial/comment.ejs","hash":"78f033711e102458fd8e5f246d67577d5e827751","modified":1483718351000},{"_id":"themes/Daily/layout/_partial/after-footer.ejs","hash":"faf39b6ae3ec3459d46df0427efdb488fda82ca6","modified":1483700737000},{"_id":"themes/Daily/layout/_partial/footer.ejs","hash":"deb9d48ab62db062897510d327dce1c62b805939","modified":1483712489000},{"_id":"themes/Daily/layout/_partial/head.ejs","hash":"9338cdc926aae79a50733e014e82471202b8fa07","modified":1483700737000},{"_id":"themes/Daily/layout/_partial/nav.ejs","hash":"bf9a3b3345e9d1798bbf2c9d88345d1781f0f73f","modified":1483790673000},{"_id":"themes/Daily/layout/_partial/pagination.ejs","hash":"98af75b95859dc6aae946497f27d7e51f753e5f6","modified":1483700737000},{"_id":"themes/Daily/source/css/style.css","hash":"23b26b21cd948a0d89fb91cb8eb830b7ed5204ce","modified":1483790849000},{"_id":"themes/Daily/source/images/arrow-left.svg","hash":"4230dcb796a40d7a0f54c68e1ffb1f325ad962a5","modified":1483700737000},{"_id":"themes/Daily/source/images/arrow-right.svg","hash":"98c04bf1be3ca657f1e9697dc63219ade0a5616c","modified":1483700737000},{"_id":"themes/Daily/source/images/github.svg","hash":"bc2e3f2e54c354acfe64899482f6379d25f04792","modified":1483700737000},{"_id":"themes/Daily/source/images/mail.svg","hash":"18b3549b0447d605ca252fefcaa4d8e11179ce21","modified":1483700737000},{"_id":"themes/Daily/source/images/menu.svg","hash":"a1837ac76bc3e2aaf30450941bfefcb29ba16411","modified":1483700737000},{"_id":"themes/Daily/source/images/twitter.svg","hash":"2bef6c843de0113721c6c5d1676385897a22a446","modified":1483700737000},{"_id":"themes/Daily/source/images/weibo.svg","hash":"ffd43d8ae9f9ec4f5ae8b97cafa9023ac2a4e59b","modified":1483700737000},{"_id":"themes/Daily/source/js/app.js","hash":"141c5ad2862b0943cb1da6e23156de5bfb007be4","modified":1483718221000},{"_id":"source/images/201611.jpg","hash":"d0cd8b34aaad985581edd0ba9815be32991c3f90","modified":1483708111000},{"_id":"source/images/IMG_6492.jpg","hash":"9355c26b41b4baea4c03f4d92cd2dbdfa48e642d","modified":1481547351000},{"_id":"source/images/mobike-wechat-app-1.png","hash":"6fa6e23279e09fef0454f973332aa619cc85162d","modified":1483781471000},{"_id":"source/images/mobike-wechat-app-3.png","hash":"8edb606037d0135c897d83bcb1267b0d8d1f4992","modified":1483784990000},{"_id":"source/images/IMG_6863.png","hash":"d5ba5f7c3a58fa2355e1ae37c9bc466b65881144","modified":1483781340000},{"_id":"public/2017-01-06/摩拜单车微信小程序快速开发实践/index.html","hash":"af41d445f73315f492022f1966ab259cc2ab05a0","modified":1483867857759},{"_id":"public/archives/index.html","hash":"b0f93f1841f4d27d7b4c50a18402da936269e2f4","modified":1483867857759},{"_id":"public/archives/2017/index.html","hash":"a71d0a0996c6546f28cb9d8d326cd168b87ad2ce","modified":1483867857760},{"_id":"public/archives/2017/01/index.html","hash":"3b6df32bdce6d446709ae5caf9d6d2a326f0284d","modified":1483867857760},{"_id":"public/index.html","hash":"398ff8d62dcabb352f7b78decdcf9cb875766567","modified":1483867857760},{"_id":"public/tags/小程序/index.html","hash":"7b961c7a55524846c6efaf98dbec84f1878fd3f3","modified":1483867857760},{"_id":"public/images/M.jpg","hash":"f80ac5caacc21a58de779f5aa69fd8facf299ba5","modified":1483867857782},{"_id":"public/images/logo.jpg","hash":"484ef32d0b643080a3b6ae1240a97cba7d4c0c1c","modified":1483867857782},{"_id":"public/images/mobike-wechat-app-2.png","hash":"61f72efb9996a404c321d300e3ae4574fec97aa8","modified":1483867857782},{"_id":"public/images/mobike-wechat-app-6.png","hash":"7a885b9c9bd5e2063d84539b3d7155d55028de6e","modified":1483867857783},{"_id":"public/images/mobike-wechat-app-5.png","hash":"0909cf9498012e4f4fefdb0551fbe53da7194537","modified":1483867857783},{"_id":"public/images/arrow-left.svg","hash":"4230dcb796a40d7a0f54c68e1ffb1f325ad962a5","modified":1483867857783},{"_id":"public/images/arrow-right.svg","hash":"98c04bf1be3ca657f1e9697dc63219ade0a5616c","modified":1483867857783},{"_id":"public/images/github.svg","hash":"bc2e3f2e54c354acfe64899482f6379d25f04792","modified":1483867857784},{"_id":"public/images/mail.svg","hash":"18b3549b0447d605ca252fefcaa4d8e11179ce21","modified":1483867857784},{"_id":"public/images/menu.svg","hash":"a1837ac76bc3e2aaf30450941bfefcb29ba16411","modified":1483867857784},{"_id":"public/images/twitter.svg","hash":"2bef6c843de0113721c6c5d1676385897a22a446","modified":1483867857784},{"_id":"public/images/weibo.svg","hash":"ffd43d8ae9f9ec4f5ae8b97cafa9023ac2a4e59b","modified":1483867857785},{"_id":"public/images/mobike-wechat-app-3-1.png","hash":"1efb51f7512b799c0cea9590972e9ec22b579150","modified":1483867857794},{"_id":"public/images/mobike-d-768x512.jpg","hash":"b74643b6b760dd107291291c27bd58328d210ec6","modified":1483867857795},{"_id":"public/images/mobike-wechat-app-4.png","hash":"ce0b5a3b2a72215eb9ba5136140e9e91a6b55f04","modified":1483867857795},{"_id":"public/js/app.js","hash":"141c5ad2862b0943cb1da6e23156de5bfb007be4","modified":1483867857799},{"_id":"public/css/style.css","hash":"23b26b21cd948a0d89fb91cb8eb830b7ed5204ce","modified":1483867857799},{"_id":"public/images/mobike-d-768x512-wechat.jpg","hash":"d0e8f739eeff91446aab4b88b94edbad4ff7ec23","modified":1483867857799},{"_id":"public/images/IMG_6492.jpg","hash":"9355c26b41b4baea4c03f4d92cd2dbdfa48e642d","modified":1483867857804},{"_id":"public/images/201611.jpg","hash":"d0cd8b34aaad985581edd0ba9815be32991c3f90","modified":1483867857804},{"_id":"public/images/mobike-wechat-app-1.png","hash":"6fa6e23279e09fef0454f973332aa619cc85162d","modified":1483867857805},{"_id":"public/images/mobike-wechat-app-3.png","hash":"8edb606037d0135c897d83bcb1267b0d8d1f4992","modified":1483867857805},{"_id":"public/images/IMG_6863.png","hash":"d5ba5f7c3a58fa2355e1ae37c9bc466b65881144","modified":1483867857820}],"Category":[{"name":"小程序","_id":"cixogb8e30001it5gnekkw37j"}],"Data":[],"Page":[],"Post":[{"title":"摩拜单车微信小程序快速开发实践","photos":["/images/mobike-d-768x512-wechat.jpg"],"author":"binnng","_content":"\n## 前言\n\n关于微信小程序的介绍不多说，关于摩拜单车更不用多说，本文主要讲讲从摩拜单车开始做小程序到开发提交微信审核的过程，前后也就一个礼拜多点时间，更甚至开发地点都跨越了上海、北京两地。\n\n曾经看到一篇言论：摩拜单车特别适合微信小程序的场景——马路上看到橙黄色单车，没有WIFI又赶时间，这时候打开微信扫一扫就可以骑走，真是无比炫酷的场景。\n\n也许你正和女朋友聊着天，不用切换APP，就骑了辆单车以最快的速度见面。\n\n## 小程序大更新\n\n12月20日，记得是个周二，微信小程序迎来大更新，不管是微信端，还是PC端的小程序开发工具，开始支持了期盼已久的功能组件，比如「地图打多点」、开放「扫一扫」，这就可以实现摩拜单车的基础功能——地图找车，扫码开锁。基于这个前提，已经可以着手开始规划摩拜单车小程序如何实现，以及要实现哪些功能。\n\n摩拜单车前端团队第一时间更新，并利用摩拜现有API和新的微信API做了DEMO，基本实现了地图找车功能。\n\n![Mobike](/images/mobike-wechat-app-1.png)\n\n## 1月9日小程序正式上线\n\n12月28日，当时在上海，也许我正在我们新的酷炫高大上的上海办公室吃着瓜，“2017微信公开课”公布小程序正式上线日期定在2017年1月9号，也就是下下个周一，真是“噩耗”，措手不及之后赶紧聚集PM和夏叔开紧急电话会议，最终决定为了赶在第一批小程序上线，我们砍掉之前规划的有些不是特别紧急的功能，实现最基础版的小程序摩拜单车——地图找车，扫码开锁，计费结算。\n\n## 需求评审\n\n12月29日，在北京的办公室紧急召集大家强行评审小程序，PM团队、设计师团队、QA团队等，需求明确后，各自开工。\n\n![Mobike](/images/mobike-wechat-app-2.png)\n\n## 设计稿\n\n12月30日，前端开始规划小程序架构，功能组件以及可能会是用到的前端库，确保在拿到设计稿之后的第一时间可以直接进入业务开发。给力的是，设计师团队在下班前就提供了完整的设计稿以及切图，之前写的DEMO版也更换成了正式的切图素材。\n\n![Mobike](/images/mobike-wechat-app-3.png)\n\n## 切页面\n\n12月31日，前端“切页面”的过程，因为要使用微信新的脚本语言，基本都是边看文档边写出页面，没了熟悉的`div`，却多了一层层的`view`；没了`window`变量，也没有`onclick`事件绑定，却有微信提供的\"wx\"全局方法，也有类似`Angular`的事件绑定；前端工程师不再可以自由操作`DOM`，而是不断设置类似`React`的`state`改变页面展现。\n\n![Mobike](/images/mobike-wechat-app-4.png)\n\n## 调接口\n\n2017年1月1日，和女朋友在上海跨完年后，紧急飞回北京，回到熟悉的大雾霾。\n\n假期的摩拜北京办公室依然有人值班。现在还清晰记得，1月2日听到的第一声小程序开锁声，激动不已，直接绕办公室骑行了好几圈。\n\n![Mobike](/images/mobike-wechat-app-5.png)\n\n## 提测\n\n1月3日，正式提测。期间遇到一些奇怪的bug，比如部分Android小程序在扫码成功后会Crash，想了很多办法还是没彻底解决，几轮测试后发现：在已有微信`map`组件的前提下，移除它再渲染一个新的`map`组件，就有极大可能引起Crash，业务场景就是找车的map销毁，骑行的map出现，直接Crash，解决办法也不复杂，整个小程序始终只有一个map组件，通过切换不同的`state`来达到不同展示的目的。技术细节以后再详解。\n\n## 提交审核\n\n1月6日，经过3天的测试和改bug，终于赶在周末前提交小程序审核，微信小程序团队的朋友也在第一时间体验并开锁成功。\n\n![Mobike](/images/mobike-wechat-app-6.png)\n\n## 广告\n\n说了这么多，重点来了：\n\n```\n摩拜单车招聘前端工程师，不在乎PC端还是移动端，也不在乎React党还是Vue党，更不在乎有分号还是无分号党，我们的技术栈多而不乱，每项技术都只服务于自身最适合的项目。\n\n如果你爱折腾技术，也爱骑单车，那就最合适不过，欢迎投简历到 hr@mobike.com 或 zhangshibing@mobike.com 。\n\n```\n\n","source":"_posts/摩拜单车微信小程序快速开发实践.md","raw":"---\ntitle: 摩拜单车微信小程序快速开发实践\nphotos: \"/images/mobike-d-768x512-wechat.jpg\"\nauthor: binnng\ntags: [\"小程序\"]\n---\n\n## 前言\n\n关于微信小程序的介绍不多说，关于摩拜单车更不用多说，本文主要讲讲从摩拜单车开始做小程序到开发提交微信审核的过程，前后也就一个礼拜多点时间，更甚至开发地点都跨越了上海、北京两地。\n\n曾经看到一篇言论：摩拜单车特别适合微信小程序的场景——马路上看到橙黄色单车，没有WIFI又赶时间，这时候打开微信扫一扫就可以骑走，真是无比炫酷的场景。\n\n也许你正和女朋友聊着天，不用切换APP，就骑了辆单车以最快的速度见面。\n\n## 小程序大更新\n\n12月20日，记得是个周二，微信小程序迎来大更新，不管是微信端，还是PC端的小程序开发工具，开始支持了期盼已久的功能组件，比如「地图打多点」、开放「扫一扫」，这就可以实现摩拜单车的基础功能——地图找车，扫码开锁。基于这个前提，已经可以着手开始规划摩拜单车小程序如何实现，以及要实现哪些功能。\n\n摩拜单车前端团队第一时间更新，并利用摩拜现有API和新的微信API做了DEMO，基本实现了地图找车功能。\n\n![Mobike](/images/mobike-wechat-app-1.png)\n\n## 1月9日小程序正式上线\n\n12月28日，当时在上海，也许我正在我们新的酷炫高大上的上海办公室吃着瓜，“2017微信公开课”公布小程序正式上线日期定在2017年1月9号，也就是下下个周一，真是“噩耗”，措手不及之后赶紧聚集PM和夏叔开紧急电话会议，最终决定为了赶在第一批小程序上线，我们砍掉之前规划的有些不是特别紧急的功能，实现最基础版的小程序摩拜单车——地图找车，扫码开锁，计费结算。\n\n## 需求评审\n\n12月29日，在北京的办公室紧急召集大家强行评审小程序，PM团队、设计师团队、QA团队等，需求明确后，各自开工。\n\n![Mobike](/images/mobike-wechat-app-2.png)\n\n## 设计稿\n\n12月30日，前端开始规划小程序架构，功能组件以及可能会是用到的前端库，确保在拿到设计稿之后的第一时间可以直接进入业务开发。给力的是，设计师团队在下班前就提供了完整的设计稿以及切图，之前写的DEMO版也更换成了正式的切图素材。\n\n![Mobike](/images/mobike-wechat-app-3.png)\n\n## 切页面\n\n12月31日，前端“切页面”的过程，因为要使用微信新的脚本语言，基本都是边看文档边写出页面，没了熟悉的`div`，却多了一层层的`view`；没了`window`变量，也没有`onclick`事件绑定，却有微信提供的\"wx\"全局方法，也有类似`Angular`的事件绑定；前端工程师不再可以自由操作`DOM`，而是不断设置类似`React`的`state`改变页面展现。\n\n![Mobike](/images/mobike-wechat-app-4.png)\n\n## 调接口\n\n2017年1月1日，和女朋友在上海跨完年后，紧急飞回北京，回到熟悉的大雾霾。\n\n假期的摩拜北京办公室依然有人值班。现在还清晰记得，1月2日听到的第一声小程序开锁声，激动不已，直接绕办公室骑行了好几圈。\n\n![Mobike](/images/mobike-wechat-app-5.png)\n\n## 提测\n\n1月3日，正式提测。期间遇到一些奇怪的bug，比如部分Android小程序在扫码成功后会Crash，想了很多办法还是没彻底解决，几轮测试后发现：在已有微信`map`组件的前提下，移除它再渲染一个新的`map`组件，就有极大可能引起Crash，业务场景就是找车的map销毁，骑行的map出现，直接Crash，解决办法也不复杂，整个小程序始终只有一个map组件，通过切换不同的`state`来达到不同展示的目的。技术细节以后再详解。\n\n## 提交审核\n\n1月6日，经过3天的测试和改bug，终于赶在周末前提交小程序审核，微信小程序团队的朋友也在第一时间体验并开锁成功。\n\n![Mobike](/images/mobike-wechat-app-6.png)\n\n## 广告\n\n说了这么多，重点来了：\n\n```\n摩拜单车招聘前端工程师，不在乎PC端还是移动端，也不在乎React党还是Vue党，更不在乎有分号还是无分号党，我们的技术栈多而不乱，每项技术都只服务于自身最适合的项目。\n\n如果你爱折腾技术，也爱骑单车，那就最合适不过，欢迎投简历到 hr@mobike.com 或 zhangshibing@mobike.com 。\n\n```\n\n","slug":"摩拜单车微信小程序快速开发实践","published":1,"date":"2017-01-06T13:08:31.000Z","updated":"2017-01-08T09:30:34.000Z","_id":"cixogab460000it5gttbi1i0p","comments":1,"layout":"post","link":"","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>关于微信小程序的介绍不多说，关于摩拜单车更不用多说，本文主要讲讲从摩拜单车开始做小程序到开发提交微信审核的过程，前后也就一个礼拜多点时间，更甚至开发地点都跨越了上海、北京两地。</p>\n<p>曾经看到一篇言论：摩拜单车特别适合微信小程序的场景——马路上看到橙黄色单车，没有WIFI又赶时间，这时候打开微信扫一扫就可以骑走，真是无比炫酷的场景。</p>\n<p>也许你正和女朋友聊着天，不用切换APP，就骑了辆单车以最快的速度见面。</p>\n<h2 id=\"小程序大更新\"><a href=\"#小程序大更新\" class=\"headerlink\" title=\"小程序大更新\"></a>小程序大更新</h2><p>12月20日，记得是个周二，微信小程序迎来大更新，不管是微信端，还是PC端的小程序开发工具，开始支持了期盼已久的功能组件，比如「地图打多点」、开放「扫一扫」，这就可以实现摩拜单车的基础功能——地图找车，扫码开锁。基于这个前提，已经可以着手开始规划摩拜单车小程序如何实现，以及要实现哪些功能。</p>\n<p>摩拜单车前端团队第一时间更新，并利用摩拜现有API和新的微信API做了DEMO，基本实现了地图找车功能。</p>\n<p><img src=\"/images/mobike-wechat-app-1.png\" alt=\"Mobike\"></p>\n<h2 id=\"1月9日小程序正式上线\"><a href=\"#1月9日小程序正式上线\" class=\"headerlink\" title=\"1月9日小程序正式上线\"></a>1月9日小程序正式上线</h2><p>12月28日，当时在上海，也许我正在我们新的酷炫高大上的上海办公室吃着瓜，“2017微信公开课”公布小程序正式上线日期定在2017年1月9号，也就是下下个周一，真是“噩耗”，措手不及之后赶紧聚集PM和夏叔开紧急电话会议，最终决定为了赶在第一批小程序上线，我们砍掉之前规划的有些不是特别紧急的功能，实现最基础版的小程序摩拜单车——地图找车，扫码开锁，计费结算。</p>\n<h2 id=\"需求评审\"><a href=\"#需求评审\" class=\"headerlink\" title=\"需求评审\"></a>需求评审</h2><p>12月29日，在北京的办公室紧急召集大家强行评审小程序，PM团队、设计师团队、QA团队等，需求明确后，各自开工。</p>\n<p><img src=\"/images/mobike-wechat-app-2.png\" alt=\"Mobike\"></p>\n<h2 id=\"设计稿\"><a href=\"#设计稿\" class=\"headerlink\" title=\"设计稿\"></a>设计稿</h2><p>12月30日，前端开始规划小程序架构，功能组件以及可能会是用到的前端库，确保在拿到设计稿之后的第一时间可以直接进入业务开发。给力的是，设计师团队在下班前就提供了完整的设计稿以及切图，之前写的DEMO版也更换成了正式的切图素材。</p>\n<p><img src=\"/images/mobike-wechat-app-3.png\" alt=\"Mobike\"></p>\n<h2 id=\"切页面\"><a href=\"#切页面\" class=\"headerlink\" title=\"切页面\"></a>切页面</h2><p>12月31日，前端“切页面”的过程，因为要使用微信新的脚本语言，基本都是边看文档边写出页面，没了熟悉的<code>div</code>，却多了一层层的<code>view</code>；没了<code>window</code>变量，也没有<code>onclick</code>事件绑定，却有微信提供的”wx”全局方法，也有类似<code>Angular</code>的事件绑定；前端工程师不再可以自由操作<code>DOM</code>，而是不断设置类似<code>React</code>的<code>state</code>改变页面展现。</p>\n<p><img src=\"/images/mobike-wechat-app-4.png\" alt=\"Mobike\"></p>\n<h2 id=\"调接口\"><a href=\"#调接口\" class=\"headerlink\" title=\"调接口\"></a>调接口</h2><p>2017年1月1日，和女朋友在上海跨完年后，紧急飞回北京，回到熟悉的大雾霾。</p>\n<p>假期的摩拜北京办公室依然有人值班。现在还清晰记得，1月2日听到的第一声小程序开锁声，激动不已，直接绕办公室骑行了好几圈。</p>\n<p><img src=\"/images/mobike-wechat-app-5.png\" alt=\"Mobike\"></p>\n<h2 id=\"提测\"><a href=\"#提测\" class=\"headerlink\" title=\"提测\"></a>提测</h2><p>1月3日，正式提测。期间遇到一些奇怪的bug，比如部分Android小程序在扫码成功后会Crash，想了很多办法还是没彻底解决，几轮测试后发现：在已有微信<code>map</code>组件的前提下，移除它再渲染一个新的<code>map</code>组件，就有极大可能引起Crash，业务场景就是找车的map销毁，骑行的map出现，直接Crash，解决办法也不复杂，整个小程序始终只有一个map组件，通过切换不同的<code>state</code>来达到不同展示的目的。技术细节以后再详解。</p>\n<h2 id=\"提交审核\"><a href=\"#提交审核\" class=\"headerlink\" title=\"提交审核\"></a>提交审核</h2><p>1月6日，经过3天的测试和改bug，终于赶在周末前提交小程序审核，微信小程序团队的朋友也在第一时间体验并开锁成功。</p>\n<p><img src=\"/images/mobike-wechat-app-6.png\" alt=\"Mobike\"></p>\n<h2 id=\"广告\"><a href=\"#广告\" class=\"headerlink\" title=\"广告\"></a>广告</h2><p>说了这么多，重点来了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">摩拜单车招聘前端工程师，不在乎PC端还是移动端，也不在乎React党还是Vue党，更不在乎有分号还是无分号党，我们的技术栈多而不乱，每项技术都只服务于自身最适合的项目。</div><div class=\"line\"></div><div class=\"line\">如果你爱折腾技术，也爱骑单车，那就最合适不过，欢迎投简历到 hr@mobike.com 或 zhangshibing@mobike.com 。</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>关于微信小程序的介绍不多说，关于摩拜单车更不用多说，本文主要讲讲从摩拜单车开始做小程序到开发提交微信审核的过程，前后也就一个礼拜多点时间，更甚至开发地点都跨越了上海、北京两地。</p>\n<p>曾经看到一篇言论：摩拜单车特别适合微信小程序的场景——马路上看到橙黄色单车，没有WIFI又赶时间，这时候打开微信扫一扫就可以骑走，真是无比炫酷的场景。</p>\n<p>也许你正和女朋友聊着天，不用切换APP，就骑了辆单车以最快的速度见面。</p>\n<h2 id=\"小程序大更新\"><a href=\"#小程序大更新\" class=\"headerlink\" title=\"小程序大更新\"></a>小程序大更新</h2><p>12月20日，记得是个周二，微信小程序迎来大更新，不管是微信端，还是PC端的小程序开发工具，开始支持了期盼已久的功能组件，比如「地图打多点」、开放「扫一扫」，这就可以实现摩拜单车的基础功能——地图找车，扫码开锁。基于这个前提，已经可以着手开始规划摩拜单车小程序如何实现，以及要实现哪些功能。</p>\n<p>摩拜单车前端团队第一时间更新，并利用摩拜现有API和新的微信API做了DEMO，基本实现了地图找车功能。</p>\n<p><img src=\"/images/mobike-wechat-app-1.png\" alt=\"Mobike\"></p>\n<h2 id=\"1月9日小程序正式上线\"><a href=\"#1月9日小程序正式上线\" class=\"headerlink\" title=\"1月9日小程序正式上线\"></a>1月9日小程序正式上线</h2><p>12月28日，当时在上海，也许我正在我们新的酷炫高大上的上海办公室吃着瓜，“2017微信公开课”公布小程序正式上线日期定在2017年1月9号，也就是下下个周一，真是“噩耗”，措手不及之后赶紧聚集PM和夏叔开紧急电话会议，最终决定为了赶在第一批小程序上线，我们砍掉之前规划的有些不是特别紧急的功能，实现最基础版的小程序摩拜单车——地图找车，扫码开锁，计费结算。</p>\n<h2 id=\"需求评审\"><a href=\"#需求评审\" class=\"headerlink\" title=\"需求评审\"></a>需求评审</h2><p>12月29日，在北京的办公室紧急召集大家强行评审小程序，PM团队、设计师团队、QA团队等，需求明确后，各自开工。</p>\n<p><img src=\"/images/mobike-wechat-app-2.png\" alt=\"Mobike\"></p>\n<h2 id=\"设计稿\"><a href=\"#设计稿\" class=\"headerlink\" title=\"设计稿\"></a>设计稿</h2><p>12月30日，前端开始规划小程序架构，功能组件以及可能会是用到的前端库，确保在拿到设计稿之后的第一时间可以直接进入业务开发。给力的是，设计师团队在下班前就提供了完整的设计稿以及切图，之前写的DEMO版也更换成了正式的切图素材。</p>\n<p><img src=\"/images/mobike-wechat-app-3.png\" alt=\"Mobike\"></p>\n<h2 id=\"切页面\"><a href=\"#切页面\" class=\"headerlink\" title=\"切页面\"></a>切页面</h2><p>12月31日，前端“切页面”的过程，因为要使用微信新的脚本语言，基本都是边看文档边写出页面，没了熟悉的<code>div</code>，却多了一层层的<code>view</code>；没了<code>window</code>变量，也没有<code>onclick</code>事件绑定，却有微信提供的”wx”全局方法，也有类似<code>Angular</code>的事件绑定；前端工程师不再可以自由操作<code>DOM</code>，而是不断设置类似<code>React</code>的<code>state</code>改变页面展现。</p>\n<p><img src=\"/images/mobike-wechat-app-4.png\" alt=\"Mobike\"></p>\n<h2 id=\"调接口\"><a href=\"#调接口\" class=\"headerlink\" title=\"调接口\"></a>调接口</h2><p>2017年1月1日，和女朋友在上海跨完年后，紧急飞回北京，回到熟悉的大雾霾。</p>\n<p>假期的摩拜北京办公室依然有人值班。现在还清晰记得，1月2日听到的第一声小程序开锁声，激动不已，直接绕办公室骑行了好几圈。</p>\n<p><img src=\"/images/mobike-wechat-app-5.png\" alt=\"Mobike\"></p>\n<h2 id=\"提测\"><a href=\"#提测\" class=\"headerlink\" title=\"提测\"></a>提测</h2><p>1月3日，正式提测。期间遇到一些奇怪的bug，比如部分Android小程序在扫码成功后会Crash，想了很多办法还是没彻底解决，几轮测试后发现：在已有微信<code>map</code>组件的前提下，移除它再渲染一个新的<code>map</code>组件，就有极大可能引起Crash，业务场景就是找车的map销毁，骑行的map出现，直接Crash，解决办法也不复杂，整个小程序始终只有一个map组件，通过切换不同的<code>state</code>来达到不同展示的目的。技术细节以后再详解。</p>\n<h2 id=\"提交审核\"><a href=\"#提交审核\" class=\"headerlink\" title=\"提交审核\"></a>提交审核</h2><p>1月6日，经过3天的测试和改bug，终于赶在周末前提交小程序审核，微信小程序团队的朋友也在第一时间体验并开锁成功。</p>\n<p><img src=\"/images/mobike-wechat-app-6.png\" alt=\"Mobike\"></p>\n<h2 id=\"广告\"><a href=\"#广告\" class=\"headerlink\" title=\"广告\"></a>广告</h2><p>说了这么多，重点来了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">摩拜单车招聘前端工程师，不在乎PC端还是移动端，也不在乎React党还是Vue党，更不在乎有分号还是无分号党，我们的技术栈多而不乱，每项技术都只服务于自身最适合的项目。</div><div class=\"line\"></div><div class=\"line\">如果你爱折腾技术，也爱骑单车，那就最合适不过，欢迎投简历到 hr@mobike.com 或 zhangshibing@mobike.com 。</div></pre></td></tr></table></figure>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cixogab460000it5gttbi1i0p","tag_id":"cixogeggs0003it5g3mqu1clg","_id":"cixogeggu0004it5gzk1nzp9x"}],"Tag":[{"name":"小程序","_id":"cixogeggs0003it5g3mqu1clg"}]}}